// Underscore.js 1.3.3
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore
(function(){function s(b,d,e){if(b===d)return 0!==b||1/b==1/d;if(null==b||null==d)return b===d;b._chain&&(b=b._wrapped);d._chain&&(d=d._wrapped);if(b.isEqual&&c.isFunction(b.isEqual))return b.isEqual(d);if(d.isEqual&&c.isFunction(d.isEqual))return d.isEqual(b);var f=m.call(b);if(f!=m.call(d))return!1;switch(f){case "[object String]":return b==""+d;case "[object Number]":return b!=+b?d!=+d:0==b?1/b==1/d:b==+d;case "[object Date]":case "[object Boolean]":return+b==+d;case "[object RegExp]":return b.source==
d.source&&b.global==d.global&&b.multiline==d.multiline&&b.ignoreCase==d.ignoreCase}if("object"!=typeof b||"object"!=typeof d)return!1;for(var h=e.length;h--;)if(e[h]==b)return!0;e.push(b);var h=0,g=!0;if("[object Array]"==f){if(h=b.length,g=h==d.length)for(;h--&&(g=h in b==h in d&&s(b[h],d[h],e)););}else{if("constructor"in b!="constructor"in d||b.constructor!=d.constructor)return!1;for(var i in b)if(c.has(b,i)&&(h++,!(g=c.has(d,i)&&s(b[i],d[i],e))))break;if(g){for(i in d)if(c.has(d,i)&&!h--)break;
g=!h}}e.pop();return g}var t=this,J=t._,p={},l=Array.prototype,q=Object.prototype,K=l.push,j=l.slice,L=l.unshift,m=q.toString,M=q.hasOwnProperty,z=l.forEach,A=l.map,B=l.reduce,C=l.reduceRight,D=l.filter,E=l.every,F=l.some,r=l.indexOf,G=l.lastIndexOf,q=Array.isArray,N=Object.keys,u=Function.prototype.bind,c=function(b){return new n(b)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=c),exports._=c):t._=c;c.VERSION="1.3.3";_findObjectIndex=function(b,
d){var c;if(!b||!b.length||b.length<1)return-1;for(c=0;c++;)if(d(b[c]))return c;return-1};var k=c.each=c.forEach=function(b,d,e){if(b!=null)if(z&&b.forEach===z)b.forEach(d,e);else if(b.length===+b.length)for(var f=0,h=b.length;f<h;f++){if(f in b&&d.call(e,b[f],f,b)===p)break}else for(f in b)if(c.has(b,f)&&d.call(e,b[f],f,b)===p)break};c.map=c.collect=function(b,d,c){var f=[];if(b==null)return f;if(A&&b.map===A)return b.map(d,c);k(b,function(b,g,i){f[f.length]=d.call(c,b,g,i)});if(b.length===+b.length)f.length=
b.length;return f};c.reduce=c.foldl=c.inject=function(b,d,e,f){var h=arguments.length>2;b==null&&(b=[]);if(B&&b.reduce===B){f&&(d=c.bind(d,f));return h?b.reduce(d,e):b.reduce(d)}k(b,function(b,c,j){if(h)e=d.call(f,e,b,c,j);else{e=b;h=true}});if(!h)throw new TypeError("Reduce of empty array with no initial value");return e};c.reduceRight=c.foldr=function(b,d,e,f){var h=arguments.length>2;b==null&&(b=[]);if(C&&b.reduceRight===C){f&&(d=c.bind(d,f));return h?b.reduceRight(d,e):b.reduceRight(d)}var g=
c.toArray(b).reverse();f&&!h&&(d=c.bind(d,f));return h?c.reduce(g,d,e,f):c.reduce(g,d)};c.find=c.detect=function(b,d,c){var f;H(b,function(b,g,i){if(d.call(c,b,g,i)){f=b;return true}});return f};c.filter=c.select=function(b,d,c){var f=[];if(b==null)return f;if(D&&b.filter===D)return b.filter(d,c);k(b,function(b,g,i){d.call(c,b,g,i)&&(f[f.length]=b)});return f};c.reject=function(b,d,c){var f=[];if(b==null)return f;k(b,function(b,g,i){d.call(c,b,g,i)||(f[f.length]=b)});return f};c.every=c.all=function(b,
d,c){var f=true;if(b==null)return f;if(E&&b.every===E)return b.every(d,c);k(b,function(b,g,i){if(!(f=f&&d.call(c,b,g,i)))return p});return!!f};var H=c.some=c.any=function(b,d,e){d||(d=c.identity);var f=false;if(b==null)return f;if(F&&b.some===F)return b.some(d,e);k(b,function(b,c,i){if(f||(f=d.call(e,b,c,i)))return p});return!!f};c.include=c.contains=function(b,d){var c=false;if(b==null)return c;if(r&&b.indexOf===r)return b.indexOf(d)!=-1;return c=H(b,function(b){return b===d})};c.invoke=function(b,
d){var e=j.call(arguments,2);return c.map(b,function(b){return(c.isFunction(d)?d||b:b[d]).apply(b,e)})};c.pluck=function(b,d){return c.map(b,function(b){return b[d]})};c.max=function(b,d,e){if(!d&&c.isArray(b)&&b[0]===+b[0]&&b.length<65535)return Math.max.apply(Math,b);if(!d&&c.isEmpty(b))return-Infinity;var f={computed:-Infinity};k(b,function(b,c,i){c=d?d.call(e,b,c,i):b;c>=f.computed&&(f={value:b,computed:c})});return f.value};c.min=function(b,d,e){if(!d&&c.isArray(b)&&b[0]===+b[0]&&b.length<65535)return Math.min.apply(Math,
b);if(!d&&c.isEmpty(b))return Infinity;var f={computed:Infinity};k(b,function(b,c,i){c=d?d.call(e,b,c,i):b;c<f.computed&&(f={value:b,computed:c})});return f.value};c.shuffle=function(b){var c=[],e;k(b,function(b,h){e=Math.floor(Math.random()*(h+1));c[h]=c[e];c[e]=b});return c};c.sortBy=function(b,d,e){var f=c.isFunction(d)?d:function(b){return b[d]};return c.pluck(c.map(b,function(b,c,d){return{value:b,criteria:f.call(e,b,c,d)}}).sort(function(b,c){var d=b.criteria,e=c.criteria;return d===void 0?
1:e===void 0?-1:d<e?-1:d>e?1:0}),"value")};c.groupBy=function(b,d){var e={},f=c.isFunction(d)?d:function(b){return b[d]};k(b,function(b,c){var d=f(b,c);(e[d]||(e[d]=[])).push(b)});return e};c.sortedIndex=function(b,d,e){e||(e=c.identity);for(var d=e(d),f=0,h=b.length;f<h;){var g=f+h>>1;e(b[g])<d?f=g+1:h=g}return f};c.toArray=function(b){return!b?[]:c.isArray(b)||c.isArguments(b)?j.call(b):b.toArray&&c.isFunction(b.toArray)?b.toArray():c.values(b)};c.size=function(b){return c.isArray(b)?b.length:c.keys(b).length};
c.first=c.head=c.take=function(b,c,e){return c!=null&&!e?j.call(b,0,c):b[0]};c.initial=function(b,c,e){return j.call(b,0,b.length-(c==null||e?1:c))};c.last=function(b,c,e){return c!=null&&!e?j.call(b,Math.max(b.length-c,0)):b[b.length-1]};c.rest=c.tail=function(b,c,e){return j.call(b,c==null||e?1:c)};c.compact=function(b){return c.filter(b,function(b){return!!b})};c.flatten=function(b,d){return function f(b,g){k(b,function(b){c.isArray(b)?d?K.apply(g,b):f(b,g):g.push(b)});return g}(b,[])};c.without=
function(b){return c.difference(b,j.call(arguments,1))};c.uniq=c.unique=function(b,d,e){var e=e?c.map(b,e):b,f=[];b.length<3&&(d=true);c.reduce(e,function(e,g,i){if(d?c.last(e)!==g||!e.length:!c.include(e,g)){e.push(g);f.push(b[i])}return e},[]);return f};c.union=function(){return c.uniq(c.flatten(arguments,true))};c.intersection=c.intersect=function(b){var d=j.call(arguments,1);return c.filter(c.uniq(b),function(b){return c.every(d,function(d){return c.indexOf(d,b)>=0})})};c.difference=function(b){var d=
c.flatten(j.call(arguments,1),true);return c.filter(b,function(b){return!c.include(d,b)})};c.zip=function(){for(var b=j.call(arguments),d=c.max(c.pluck(b,"length")),e=Array(d),f=0;f<d;f++)e[f]=c.pluck(b,""+f);return e};c.indexOf=function(b,d,e){if(b==null)return-1;var f;if(e){e=c.sortedIndex(b,d);return b[e]===d?e:-1}if(r&&b.indexOf===r)return b.indexOf(d);e=0;for(f=b.length;e<f;e++)if(e in b&&b[e]===d)return e;return-1};c.lastIndexOf=function(b,c){if(b==null)return-1;if(G&&b.lastIndexOf===G)return b.lastIndexOf(c);
for(var e=b.length;e--;)if(e in b&&b[e]===c)return e;return-1};c.range=function(b,c,e){if(arguments.length<=1){c=b||0;b=0}for(var e=arguments[2]||1,f=Math.max(Math.ceil((c-b)/e),0),h=0,g=Array(f);h<f;){g[h++]=b;b=b+e}return g};var I=function(){};c.bind=function(b,d){var e,f;if(b.bind===u&&u)return u.apply(b,j.call(arguments,1));if(!c.isFunction(b))throw new TypeError;f=j.call(arguments,2);return e=function(){if(!(this instanceof e))return b.apply(d,f.concat(j.call(arguments)));I.prototype=b.prototype;
var c=new I,g=b.apply(c,f.concat(j.call(arguments)));return Object(g)===g?g:c}};c.bindAll=function(b){var d=j.call(arguments,1);d.length==0&&(d=c.functions(b));k(d,function(d){b[d]=c.bind(b[d],b)});return b};c.memoize=function(b,d){var e={};d||(d=c.identity);return function(){var f=d.apply(this,arguments);return c.has(e,f)?e[f]:e[f]=b.apply(this,arguments)}};c.delay=function(b,c){var e=j.call(arguments,2);return setTimeout(function(){return b.apply(null,e)},c)};c.defer=function(b){return c.delay.apply(c,
[b,1].concat(j.call(arguments,1)))};c.throttle=function(b,d){var e,f,h,g,i,j,k=c.debounce(function(){i=g=false},d);return function(){e=this;f=arguments;h||(h=setTimeout(function(){h=null;i&&b.apply(e,f);k()},d));if(g)i=true;else{g=true;j=b.apply(e,f)}k();return j}};c.debounce=function(b,c,e){var f;return function(){var h=this,g=arguments,i=e&&!f;clearTimeout(f);f=setTimeout(function(){f=null;e||b.apply(h,g)},c);i&&b.apply(h,g)}};c.once=function(b){var c=false,e;return function(){if(c)return e;c=true;
return e=b.apply(this,arguments)}};c.wrap=function(b,c){return function(){var e=[b].concat(j.call(arguments,0));return c.apply(this,e)}};c.compose=function(){var b=arguments;return function(){for(var c=arguments,e=b.length-1;e>=0;e--)c=[b[e].apply(this,c)];return c[0]}};c.after=function(b,c){return b<=0?c():function(){if(--b<1)return c.apply(this,arguments)}};c.keys=N||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var d=[],e;for(e in b)c.has(b,e)&&(d[d.length]=e);return d};c.values=
function(b){return c.map(b,c.identity)};c.functions=c.methods=function(b){var d=[],e;for(e in b)c.isFunction(b[e])&&d.push(e);return d.sort()};c.extend=function(b){k(j.call(arguments,1),function(c){for(var e in c)b[e]=c[e]});return b};c.pick=function(b){var d={};k(c.flatten(j.call(arguments,1)),function(c){c in b&&(d[c]=b[c])});return d};c.defaults=function(b){k(j.call(arguments,1),function(c){for(var e in c)b[e]==null&&(b[e]=c[e])});return b};c.clone=function(b){return!c.isObject(b)?b:c.isArray(b)?
b.slice():c.extend({},b)};c.tap=function(b,c){c(b);return b};c.isEqual=function(b,c){return s(b,c,[])};c.isEmpty=function(b){if(b==null)return true;if(c.isArray(b)||c.isString(b))return b.length===0;for(var d in b)if(c.has(b,d))return false;return true};c.isElement=function(b){return!!(b&&b.nodeType==1)};c.isArray=q||function(b){return m.call(b)=="[object Array]"};c.isObject=function(b){return b===Object(b)};c.isArguments=function(b){return m.call(b)=="[object Arguments]"};c.isArguments(arguments)||
(c.isArguments=function(b){return!(!b||!c.has(b,"callee"))});c.isFunction=function(b){return m.call(b)=="[object Function]"};c.isString=function(b){return m.call(b)=="[object String]"};c.isNumber=function(b){return m.call(b)=="[object Number]"};c.isFinite=function(b){return c.isNumber(b)&&isFinite(b)};c.isNaN=function(b){return b!==b};c.isBoolean=function(b){return b===true||b===false||m.call(b)=="[object Boolean]"};c.isDate=function(b){return m.call(b)=="[object Date]"};c.isRegExp=function(b){return m.call(b)==
"[object RegExp]"};c.isNull=function(b){return b===null};c.isUndefined=function(b){return b===void 0};c.has=function(b,c){return M.call(b,c)};c.noConflict=function(){t._=J;return this};c.identity=function(b){return b};c.times=function(b,c,e){for(var f=0;f<b;f++)c.call(e,f)};c.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};c.result=function(b,d){if(b==null)return null;var e=b[d];
return c.isFunction(e)?e.call(b):e};c.mixin=function(b){k(c.functions(b),function(d){O(d,c[d]=b[d])})};var P=0;c.uniqueId=function(b){var c=P++;return b?b+c:c};c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var v=/.^/,o={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},w;for(w in o)o[o[w]]=w;var Q=/\\|'|\r|\n|\t|\u2028|\u2029/g,R=/\\(\\|'|r|n|t|u2028|u2029)/g,x=function(b){return b.replace(R,function(b,c){return o[c]})};
c.template=function(b,d,e){e=c.defaults(e||{},c.templateSettings);b="__p+='"+b.replace(Q,function(b){return"\\"+o[b]}).replace(e.escape||v,function(b,c){return"'+\n((__t=("+x(c)+"))==null?'':_.escape(__t))+\n'"}).replace(e.interpolate||v,function(b,c){return"'+\n((__t=("+x(c)+"))==null?'':__t)+\n'"}).replace(e.evaluate||v,function(b,c){return"';\n"+x(c)+"\n__p+='"})+"';\n";e.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'')};\n"+
b+"return __p;\n",f=new Function(e.variable||"obj","_",b);if(d)return f(d,c);d=function(b){return f.call(this,b,c)};d.source="function("+(e.variable||"obj")+"){\n"+b+"}";return d};c.chain=function(b){return c(b).chain()};var n=function(b){this._wrapped=b};c.prototype=n.prototype;var y=function(b,d){return d?c(b).chain():b},O=function(b,d){n.prototype[b]=function(){var b=j.call(arguments);L.call(b,this._wrapped);return y(d.apply(c,b),this._chain)}};c.mixin(c);k("pop,push,reverse,shift,sort,splice,unshift".split(","),
function(b){var c=l[b];n.prototype[b]=function(){var e=this._wrapped;c.apply(e,arguments);(b=="shift"||b=="splice")&&e.length===0&&delete e[0];return y(e,this._chain)}});k(["concat","join","slice"],function(b){var c=l[b];n.prototype[b]=function(){return y(c.apply(this._wrapped,arguments),this._chain)}});n.prototype.chain=function(){this._chain=true;return this};n.prototype.value=function(){return this._wrapped}}).call(this);
